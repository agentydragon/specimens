rationale: |-
  The unmarshalling switch in internal/message/message.go repeats the same pattern for each part type: allocate
  typed var, json.Unmarshal(wrapper.Data, &var), check err, append. This is noisy and error-prone; centralize
  using a map of constructors/decoders to reduce duplication and make adding new part types simpler.
should_flag: true
occurrences:
- occurrence_id: occ-0
  files:
    internal/message/message.go:
    - 358
    - 406
  critic_scopes_expected_to_recall:
  - - internal/message/message.go
  graders_match_only_if_reported_on:
  - internal/message/message.go
