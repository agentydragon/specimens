rationale: |
  Pre-serialization of Pydantic models before passing to persistence layer.

  Calls model_dump() at caller site (lines 102-103, 110, 145-146) before passing
  to persistence methods. This violates separation of concerns - caller shouldn't
  know about persistence format.

  Anti-pattern: Serialization at caller site instead of callee. Correct approach:
  append_event should accept typed EventRecord payload, ResponsePayload should
  accept Response model, and serialization should happen inside persistence layer.

  Benefits:
  - Type safety preserved across call boundary
  - Single serialization point (DRY)
  - Clearer responsibility boundaries
  - Caller doesn't need to know persistence format
  - Easier to change serialization strategy later
should_flag: true
occurrences:
- occurrence_id: occ-0
  files:
    adgn/src/adgn/agent/persist/handler.py:
    - - 102
      - 103
    - - 110
      - 110
    - - 145
      - 146
  critic_scopes_expected_to_recall:
  - - adgn/src/adgn/agent/persist/handler.py
