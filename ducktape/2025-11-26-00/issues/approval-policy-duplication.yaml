rationale: |
  The `approval_policy` field appears BOTH as a direct sibling in Snapshot (protocol.py:199)
  AND inside the `details.SnapshotDetails` bundle (protocol.py:188). Construction in
  runtime.py:232, 244-245 passes `approval_policy` to SnapshotDetails and also assigns it
  as a Snapshot sibling.

  Problems: (1) Data duplication - same data sent twice. (2) Inconsistency risk - two copies
  can drift. (3) Confusing semantics - which is authoritative? (4) Larger payloads.
  (5) Related to issue 014 - reinforces that SnapshotDetails bundle is architecturally wrong.

  Comment on line 229 says "Build preferred details bundle when all components are present",
  suggesting migration path. Old `approval_policy` sibling was never removed, creating duplication.

  Correct solution: Delete SnapshotDetails bundle entirely and keep fields as direct siblings.
  Alternative (if bundle must stay): Remove `approval_policy` from sibling fields. But
  direct-sibling approach is cleaner.
should_flag: true
occurrences:
- occurrence_id: occ-0
  files:
    adgn/src/adgn/agent/server/protocol.py:
    - - 179
      - 190
    - - 193
      - 200
    adgn/src/adgn/agent/server/runtime.py:
    - - 232
      - 232
    - - 244
      - 245
  expect_caught_from:
  - - adgn/src/adgn/agent/server/runtime.py
  - - adgn/src/adgn/agent/server/protocol.py
