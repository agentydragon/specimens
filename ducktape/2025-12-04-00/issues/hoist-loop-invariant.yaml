rationale: |
  The assertion that eval_batch.trajectories is not None appears inside the loop at line 279
  but is a function-level invariant. It should be moved outside the loop (after line 272)
  since trajectories is either always None or always present for the entire batch.

  Additionally, the loop over components_to_update should be removed entirely since
  there will be exactly one component ("system_prompt"). The code can directly process
  that component without iteration.
should_flag: true
occurrences:
- occurrence_id: occ-0
  files:
    adgn/src/adgn/props/gepa/gepa_adapter.py:
    - [274, 300]
  critic_scopes_expected_to_recall:
  - - adgn/src/adgn/props/gepa/gepa_adapter.py
  graders_match_only_if_reported_on:
  - adgn/src/adgn/props/gepa/gepa_adapter.py
