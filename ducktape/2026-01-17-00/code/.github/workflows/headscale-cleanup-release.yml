# Build and release headscale-cleanup wheel
name: headscale-cleanup Release

on:
  push:
    branches: [devel, main]
    paths:
      - "headscale_cleanup/**"
  workflow_dispatch:

permissions:
  contents: write

jobs:
  release:
    uses: ./.github/workflows/python-wheel-release.yml
    with:
      package_name: headscale-cleanup
      wheel_name: headscale_cleanup
      bazel_target: //headscale_cleanup:headscale_cleanup_wheel
      wheel_path: bazel-bin/headscale_cleanup
      release_body: |
        headscale-cleanup wheel.

        CLI tool for cleaning up stale Headscale nodes (controlplane* and worker* nodes).
