load("@rules_python//python:defs.bzl", "py_library")

# Core LLM utilities - Claude Code API, hooks, outcomes
py_library(
    name = "claude_code_api",
    srcs = ["claude_code_api.py"],
    imports = [".."],
    visibility = ["//visibility:public"],
    deps = [
        "@pypi//pydantic",
    ],
)

py_library(
    name = "claude_outcomes",
    srcs = ["claude_outcomes.py"],
    imports = [".."],
    visibility = ["//visibility:public"],
    deps = [
        ":claude_code_api",
        "@pypi//pydantic",
    ],
)

py_library(
    name = "hook_session_state",
    srcs = ["hook_session_state.py"],
    imports = [".."],
    visibility = ["//visibility:public"],
    deps = [
        ":claude_code_api",
        "@pypi//platformdirs",
    ],
)

py_library(
    name = "hook_logging",
    srcs = ["hook_logging.py"],
    imports = [".."],
    visibility = ["//visibility:public"],
    deps = [
        ":claude_code_api",
        ":hook_session_state",
    ],
)

py_library(
    name = "claude_hooks",
    srcs = ["claude_hooks.py"],
    imports = [".."],
    visibility = ["//visibility:public"],
    deps = [
        ":claude_code_api",
    ],
)

py_library(
    name = "claude_hook",
    srcs = ["claude_hook.py"],
    imports = [".."],
    visibility = ["//visibility:public"],
    deps = [
        ":claude_code_api",
        ":claude_outcomes",
        ":hook_logging",
    ],
)

# Convenience target for the core library
py_library(
    name = "core",
    visibility = ["//visibility:public"],
    deps = [
        ":claude_code_api",
        ":claude_hook",
        ":claude_hooks",
        ":claude_outcomes",
        ":hook_logging",
        ":hook_session_state",
    ],
)
