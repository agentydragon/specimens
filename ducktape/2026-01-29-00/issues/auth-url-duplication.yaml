rationale: |
  The `dev()` command duplicates the auth URL construction logic from `_print_auth_url()`:
  it re-reads `TokensConfig.from_yaml_file()`, re-extracts the first user token, and
  re-builds the authenticated URL with `urlencode`/`urlunparse`. Extract a helper that
  returns the auth URL string (or None), then both `_print_auth_url` and the
  `open_browser` block can call it.
should_flag: true
occurrences:
  - occurrence_id: occ-0
    files:
      agent_server/cli.py:
        - [52, 64]
        - [136, 146]
    note: "Lines 138-142 duplicate the token-lookup and URL-building logic from _print_auth_url (lines 54-59)"
    critic_scopes_expected_to_recall:
      - [agent_server/cli.py]
